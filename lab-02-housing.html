<!DOCTYPE html>
<html lang="en"><head>
<script src="lab-02-housing_files/libs/quarto-html/tabby.min.js"></script>
<script src="lab-02-housing_files/libs/quarto-html/popper.min.js"></script>
<script src="lab-02-housing_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="lab-02-housing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab-02-housing_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="lab-02-housing_files/libs/quarto-html/quarto-syntax-highlighting-cdaacfc258cb6f151192107f105ac881.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.9.12">

  <meta name="author" content="Matteo Francia   DISI — University of Bologna   m.francia@unibo.it">
  <title>Machine Learning and Data Mining (Module 2)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="lab-02-housing_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="lab-02-housing_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="lab-02-housing_files/libs/revealjs/dist/theme/quarto-b3aa9dda08c8fde6dffd4aadb76df7d0.css">
  <link href="lab-02-housing_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="lab-02-housing_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="lab-02-housing_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="lab-02-housing_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Machine Learning and Data Mining (Module 2)</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Matteo Francia <br> DISI — University of Bologna <br> m.francia@unibo.it 
</div>
</div>
</div>

</section>
<section class="slide level2">

<!-- <a href="https://colab.research.google.com/github/w4bo/AA2425-unibo-mldm/blob/master/slides/lab-02-housing.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a> -->
</section>
<section id="the-california-housing-case-study" class="title-slide slide level1 center">
<h1>The <a href="https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/"><code>California Housing</code></a> case study</h1>
<p>Our task is to use California census data to forecast housing prices given the population, median income, and median housing price for each block group in California. Block groups are the smallest geographical unit for which the US Census Bureau publishes sample data (a block group typically has a population of 600 to 3,000 people). We will just call them “districts” for short.</p>
<div id="80970f2e" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:19.804084Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:19.804084Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:20.600432Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:20.600432Z&quot;}}" data-outputid="587cfb9c-3001-4d5a-8aa5-819ce7247549">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb1-1"><a href=""></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href=""></a></span>
<span id="cb1-3"><a href=""></a><span class="co"># df = pd.read_csv("/content/sample_data/california_housing_train.csv", delimiter=",")</span></span>
<span id="cb1-4"><a href=""></a>df <span class="op">=</span> pd.read_csv(<span class="st">"https://raw.githubusercontent.com/w4bo/handsOnDataPipelines/main/materials/datasets/housing.csv"</span>, delimiter<span class="op">=</span><span class="st">","</span>)</span>
<span id="cb1-5"><a href=""></a>df</span></code></pre></div>
</details>
</div>
</section>

<section id="and-now" class="title-slide slide level1 center">
<h1>… and now?</h1>

</section>

<section id="answer-some-questions" class="title-slide slide level1 center">
<h1>Answer some questions:</h1>
<ul>
<li>Which attributes (i.e., columns) are contained in the dataset?</li>
<li>Which is their semantics?</li>
</ul>
<div id="9817e68c" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:20.602431Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:20.602431Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:20.605730Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:20.605730Z&quot;}}" data-outputid="7a505de0-d4f0-42d0-f781-bb4abd8f8fce">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb2-1"><a href=""></a>df.columns</span></code></pre></div>
</details>
</div>
<p>Dataset description</p>
<ol type="1">
<li><code>longitude</code>: A measure of how far west a house is; a higher value is farther west</li>
<li><code>latitude</code>: A measure of how far north a house is; a higher value is farther north</li>
<li><code>housingMedianAge</code>: Median age of a house within a block; a lower number is a newer building</li>
<li><code>totalRooms</code>: Total number of rooms within a block</li>
<li><code>totalBedrooms</code>: Total number of bedrooms within a block</li>
<li><code>population</code>: Total number of people residing within a block</li>
<li><code>households</code>: Total number of households, a group of people residing within a home unit, for a block</li>
<li><code>medianIncome</code>: Median income for households within a block of houses (measured in tens of thousands of US Dollars)</li>
<li><code>medianHouseValue</code>: Median house value for households within a block (measured in US Dollars)</li>
<li><code>oceanProximity</code>: Location of the house w.r.t ocean/sea</li>
</ol>
</section>

<section id="data-profiling" class="title-slide slide level1 center">
<h1>Data profiling</h1>
<div id="85441c0b" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:20.607716Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:20.607716Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:20.613716Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:20.613716Z&quot;}}" data-outputid="2f22dd7b-0b6b-4f6f-ef8c-b317a0b6c28c">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb3-1"><a href=""></a><span class="co"># show some statistics on the dataframe</span></span>
<span id="cb3-2"><a href=""></a>df.info()</span></code></pre></div>
</details>
</div>
</section>

<section id="data-profiling-1" class="title-slide slide level1 center">
<h1>Data profiling</h1>
<div id="e6a24b3a" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:20.615716Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:20.615716Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:20.635039Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:20.635039Z&quot;}}" data-outputid="14d781ec-eb1f-4e59-d475-cc3a39f7e5cb">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb4-1"><a href=""></a>df.describe(include<span class="op">=</span><span class="st">'all'</span>)</span></code></pre></div>
</details>
</div>
</section>

<section id="are-you-satisfied-with-the-understanding" class="title-slide slide level1 center">
<h1>… are you satisfied with the understanding?</h1>

</section>

<section>
<section id="what-about-data-visualization" class="title-slide slide level1 center">
<h1>… what about data visualization?</h1>
<p>Can we exploit the nature of the data?</p>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div id="H0bU-4jprHm3" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:20.637045Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:20.637045Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:21.500456Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:21.500456Z&quot;}}" data-outputid="9bf8d9ae-213a-4873-ff38-a202193c9066">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb5-1"><a href=""></a>df.plot(kind<span class="op">=</span><span class="st">"scatter"</span>, x<span class="op">=</span><span class="st">"longitude"</span>, y<span class="op">=</span><span class="st">"latitude"</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, s<span class="op">=</span>df[<span class="st">"population"</span>]<span class="op">/</span><span class="dv">100</span>, label<span class="op">=</span><span class="st">"population"</span>, figsize<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">3</span>), c<span class="op">=</span><span class="st">"median_house_value"</span>, cmap<span class="op">=</span><span class="st">"jet"</span>, colorbar<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
</details>
</div>
</section></section>
<section id="what-if-we-integrate-open-data" class="title-slide slide level1 center">
<h1>What if we integrate open data?</h1>

</section>

<section id="can-we-exploit-the-nature-of-the-data-again" class="title-slide slide level1 center">
<h1>Can we exploit the nature of the data… again?</h1>

<img data-src="https://github.com/w4bo/2024-bbs-dm/assets/18005592/06d9fd78-5856-4119-accb-62de0f54b680" class="r-stretch quarto-figure-center"><p class="caption">California, USA</p></section>

<section id="merging-the-data-sources" class="title-slide slide level1 center">
<h1>Merging the data sources</h1>

<img data-src="https://user-images.githubusercontent.com/18005592/232756567-b706619a-2cc9-4b45-b78f-5172103e0c3b.png" class="r-stretch"></section>

<section id="memory-usage" class="title-slide slide level1 center">
<h1>Memory usage</h1>
<p>What if I change float64 to float32?</p>
<div id="8f1e7c90" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:21.502456Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:21.502456Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:21.510610Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:21.510610Z&quot;}}" data-outputid="42de86f8-33bc-4b32-ba59-df1d5f761ac8">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb6-1"><a href=""></a>dff <span class="op">=</span> df.copy(deep<span class="op">=</span><span class="va">True</span>)  <span class="co"># copy the dataframe</span></span>
<span id="cb6-2"><a href=""></a><span class="cf">for</span> x <span class="kw">in</span> df.columns:  <span class="co"># iterate over the columns</span></span>
<span id="cb6-3"><a href=""></a>    <span class="cf">if</span> dff[x].dtype <span class="op">==</span> <span class="st">'float64'</span>:  <span class="co"># if the column has type `float64`</span></span>
<span id="cb6-4"><a href=""></a>        dff[x] <span class="op">=</span> dff[x].astype(<span class="st">'float32'</span>)  <span class="co"># ... change it to `float32`</span></span>
<span id="cb6-5"><a href=""></a>dff.info()  <span class="co"># show some statistics on the dataframe</span></span></code></pre></div>
</details>
</div>
</section>

<section id="missing-values" class="title-slide slide level1 center">
<h1>Missing values</h1>
<p>There are some missing values for <code>total_bedrooms</code>. What should we do?</p>
<p>Most Machine Learning algorithms cannot work with missing features.</p>
</section>

<section id="non-numeric-attributes" class="title-slide slide level1 center">
<h1>Non-numeric attributes</h1>
<p><code>ocean_proximity</code> is a text attribute, but not all machine libraries can manipulated textual data types.</p>
<div id="3297de8e" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:21.512620Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:21.512620Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:21.517623Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:21.517623Z&quot;}}" data-outputid="3e206562-51ff-44be-d06d-d1f44a268887">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb7-1"><a href=""></a>df[<span class="st">"ocean_proximity"</span>].value_counts()</span></code></pre></div>
</details>
</div>
</section>

<section id="non-numeric-attributes-1" class="title-slide slide level1 center">
<h1>Non-numeric attributes</h1>
<div id="xkOk2VEdVkde" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:21.519640Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:21.518651Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:21.579634Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:21.579634Z&quot;}}" data-outputid="aa85d542-74b5-4601-bd74-e1af0e45bf08">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb8-1"><a href=""></a>df[<span class="st">"ocean_proximity"</span>].hist()</span></code></pre></div>
</details>
</div>
</section>

<section id="visualization" class="title-slide slide level1 center">
<h1>Visualization</h1>
<div id="570f14ff" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:21.581641Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:21.581641Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:22.361286Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:22.361286Z&quot;}}" data-outputid="76614232-7bd6-452f-df80-a8da248f923b">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb9-1"><a href=""></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-2"><a href=""></a><span class="op">%</span>matplotlib inline</span>
<span id="cb9-3"><a href=""></a>df.hist(bins<span class="op">=</span><span class="dv">50</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">15</span>))</span>
<span id="cb9-4"><a href=""></a>plt.show()</span></code></pre></div>
</details>
</div>
</section>

<section id="open-questions" class="title-slide slide level1 center">
<h1>Open questions</h1>
<ul>
<li><code>median_income</code> should be in dollars. However, it has a strange range. Why? “you are told that the data has been scaled and capped at 15 (actually 15.0001) for higher median incomes, and at 0.5 (actually 0.4999) for lower median incomes. The numbers represent roughly tens of thousands of dollars. The numbers represent roughly tens of thousands of dollars”</li>
<li><code>housing_median_age</code> and <code>median_house_value</code> are capped. As to <code>median_house_value</code>, this is a serious problem since it is your target attribute (your labels). Your Machine Learning algorithms may learn that prices never go beyond that limit. You need to check with your client team (the team that will use your system’s output) to see if this is a problem or not. If they tell you that they need precise predictions even beyond 500,000USD, then you have mainly two options: (a) collect proper labels for the districts whose labels were capped, (b) remove those districts from the training set.”</li>
<li>These attributes have very different scales. Should we scale them?</li>
<li>Many histograms are tail heavy: they extend much farther to the right of the median than to the left. This may make it a bit harder for some Machine Learning algorithms to detect patterns</li>
</ul>
</section>

<section id="relationships-between-variables" class="title-slide slide level1 center">
<h1>Relationships between variables</h1>
<ul>
<li>Each numeric variable in data will by shared across the y-axes across a single row and the x-axes across a single column</li>
<li>The diagonal plots are treated differently: univariate distribution plots show the marginal distributions of the data</li>
</ul>
<div id="jFvRyNbGV36l" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:22.363292Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:22.363292Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:28.866021Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:28.866021Z&quot;}}" data-outputid="84be7606-9a80-42ba-b9de-668d9fbd44b9">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb10-1"><a href=""></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb10-2"><a href=""></a></span>
<span id="cb10-3"><a href=""></a>tmp <span class="op">=</span> df[[<span class="st">"median_income"</span>, <span class="st">"housing_median_age"</span>, <span class="st">"median_house_value"</span>, <span class="st">"households"</span>, <span class="st">"population"</span>, <span class="st">"total_rooms"</span>]]</span>
<span id="cb10-4"><a href=""></a>sns.pairplot(tmp.sample(n<span class="op">=</span><span class="dv">1000</span>, random_state<span class="op">=</span><span class="dv">42</span>), hue<span class="op">=</span><span class="st">'median_house_value'</span>, markers<span class="op">=</span><span class="st">'+'</span>)</span>
<span id="cb10-5"><a href=""></a>plt.show()</span></code></pre></div>
</details>
</div>
</section>

<section id="section-1" class="title-slide slide level1 center">
<h1></h1>
<div id="cd370cf0" class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb11-1"><a href=""></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb11-2"><a href=""></a></span>
<span id="cb11-3"><a href=""></a>correlation_matrix <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'number'</span>]).corr()  <span class="co"># Compute the correlation matrix only on numerical features</span></span>
<span id="cb11-4"><a href=""></a>filtered_correlation_matrix <span class="op">=</span> correlation_matrix[correlation_matrix.<span class="bu">abs</span>() <span class="op">&gt;=</span> <span class="fl">0.25</span>]  <span class="co"># Mask correlations with absolute values below 0.25</span></span>
<span id="cb11-5"><a href=""></a>filtered_correlation_matrix[np.eye(filtered_correlation_matrix.shape[<span class="dv">0</span>], dtype<span class="op">=</span><span class="bu">bool</span>)] <span class="op">=</span> np.nan  <span class="co"># Mask the diagonal</span></span>
<span id="cb11-6"><a href=""></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb11-7"><a href=""></a>sns.heatmap(filtered_correlation_matrix, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, cmap<span class="op">=</span><span class="st">"coolwarm"</span>, cbar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-8"><a href=""></a>plt.title(<span class="st">"Pairwise Correlations (|correlation| &gt;= 0.25)"</span>)</span>
<span id="cb11-9"><a href=""></a>plt.tight_layout()</span></code></pre></div>
</details>
</div>
</section>

<section id="pareto-frontier" class="title-slide slide level1 center">
<h1>Pareto frontier</h1>
<p>Which blocks represent a good tradeof between cost and number of rooms?</p>
<div id="U_q70SWYhXQI" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:31.774763Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:31.774763Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:31.897734Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:31.897734Z&quot;}}" data-outputid="c27adae9-3828-48a4-84ff-f3710452dd13">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb12-1"><a href=""></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb12-2"><a href=""></a>df[<span class="st">"room_per_household"</span>] <span class="op">=</span> df[<span class="st">"total_rooms"</span>] <span class="op">/</span> df[<span class="st">"households"</span>]</span>
<span id="cb12-3"><a href=""></a>df.plot.scatter(x<span class="op">=</span><span class="st">'median_house_value'</span>, y<span class="op">=</span><span class="st">'room_per_household'</span>, ax<span class="op">=</span>ax)</span></code></pre></div>
</details>
</div>
</section>

<section id="skyline" class="title-slide slide level1 center">
<h1>Skyline</h1>
<p>The <strong>skyline operator</strong>: optimization problem that computes the Pareto optimum on tuples with multiple dimensions</p>
<ul>
<li><em>Skyline</em> comes from the view on Manhattan from the Hudson River. A building is visible if it is not dominated by a building that is taller or closer to the river (two dimensions, distance to the river minimized, height maximized).</li>
<li>Users want hotels for a holidays to be cheap and close to the beach. However, hotels that are close to the beach are expensive.</li>
</ul>
<p>Formally, a tuple <strong>dominates</strong> another if it is at least as good in all dimensions and better in at least one dimension.</p>

<img data-src="https://img.andrewprokos.com/NYC-SKYLINE-FR-JC-PANORAMA-1100PX-500x170@2x.jpg" class="r-stretch quarto-figure-center"><p class="caption">NY Skyline</p></section>

<section id="pareto-frontier-1" class="title-slide slide level1 center">
<h1>Pareto frontier</h1>
<div id="0_KF0LBDhab3" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:31.899748Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:31.899748Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:33.598030Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:33.598030Z&quot;}}" data-outputid="8303d6be-33f4-4d76-c891-3278b0be3212">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb13-1"><a href=""></a><span class="im">from</span> paretoset <span class="im">import</span> paretoset</span>
<span id="cb13-2"><a href=""></a></span>
<span id="cb13-3"><a href=""></a>mask <span class="op">=</span> paretoset(df[[<span class="st">"median_house_value"</span>, <span class="st">"room_per_household"</span>]], sense<span class="op">=</span>[<span class="st">"min"</span>, <span class="st">"max"</span>])</span>
<span id="cb13-4"><a href=""></a>df[mask].plot.scatter(x<span class="op">=</span><span class="st">'median_house_value'</span>, y<span class="op">=</span><span class="st">'room_per_household'</span>, ax<span class="op">=</span>ax, c<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb13-5"><a href=""></a>fig</span></code></pre></div>
</details>
</div>
</section>

<section id="exercise-1" class="title-slide slide level1 center">
<h1>Exercise 1</h1>
<ol type="1">
<li>For each <code>ocean_proximity</code>, return the number of blocks</li>
<li>Return the <code>ocean_proximity</code> with the highest number of blocks</li>
<li>Print the mean value per <code>ocean_proximity</code> for every column</li>
<li>Print the mean, min and max values value per <code>ocean_proximity</code> for every column</li>
</ol>
<div id="iURuzXemMzma" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:34.429557Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:34.429557Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:34.431988Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:34.431988Z&quot;}}">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb14-1"><a href=""></a><span class="co"># Write your code here</span></span></code></pre></div>
</details>
</div>
</section>

<section id="exercise-2" class="title-slide slide level1 center">
<h1>Exercise 2</h1>
<ol type="1">
<li>Add a new column: <code>population_per_household = population / households</code></li>
<li>Add a new column: <code>rooms_per_household = total_rooms / households</code></li>
<li>Add a new column: <code>bedrooms_per_room = total_bedrooms / total_rooms</code></li>
</ol>
<div id="ef4ed12b" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2024-10-08T14:38:34.434007Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-10-08T14:38:34.433009Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-10-08T14:38:34.435682Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-10-08T14:38:34.435682Z&quot;}}">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb15-1"><a href=""></a><span class="co"># Write your code here</span></span></code></pre></div>
</details>
</div>
</section>

<section id="exercise-3" class="title-slide slide level1 center">
<h1>Exercise 3</h1>
<p>Complete the prediction pipeline with data preprocessing and machine learning algorithms</p>
<div id="b9190e63" class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb16-1"><a href=""></a><span class="co"># Write your code here</span></span></code></pre></div>
</details>
</div>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Matteo Francia - Machine Learning and Data Mining (Module 2) - A.Y. 2024/25</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="lab-02-housing_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="lab-02-housing_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="lab-02-housing_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="lab-02-housing_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>